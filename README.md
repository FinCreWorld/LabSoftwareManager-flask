# 实验环境

| **环境**       | **说明**                                |
| -------------- | --------------------------------------- |
| 操作系统       | win10                                   |
| 数据库建模     | PowerDesigner 16.5                      |
| 数据库         | MySQL Community、MySQL Workbench 8.0    |
| 开发平台       | PyCharm                                 |
| 前端语言       | html5+CSS                               |
| 后端语言       | Python 3.8.8 + Flask架构（Flask 2.0.2） |
| python相关依赖 | 见附录1                                 |

# 实验过程

## 系统功能

![image-20220508191111057](https://gitee.com/JiangChenyang/typora_md_images/raw/master//image-20220508191111057.png)

1.  房间模块

展示以房间为主的信息，同时支持对现有房间进行修改，删除。其中信息展示内容为

| 房间名 | 管理员 | 教师容量 | 电脑型号 | 电脑配置 | 操作系统1 | 操作系统2 | 已安装软件 | 相关课程 | 备注 |
| ------ | ------ | -------- | -------- | -------- | --------- | --------- | ---------- | -------- | ---- |

包含了与房间无直接相关信息。而房间管理则只负责房间直接相关信息

| id   | 房间名 | 房间位置 | 房间容量 | 电脑型号 | 管理员 | 备注 |
| ---- | ------ | -------- | -------- | -------- | ------ | ---- |

1.  电脑模块

主要负责展示目前拥有的电脑，并支持增加、修改删除。

| 电脑型号 | 内存 | cpu  | gpu  | 磁盘 | 磁盘剩余 | 操作系统1 | 操作系统2 |
| -------- | ---- | ---- | ---- | ---- | -------- | --------- | --------- |

1.  课程模块

支持查看并设置课程信息，查看并设置课程所需软件

| 学院 | 课程名 | 课程教师 | 课程学时 | 总人数 | 每班人数 | 上课地点 | 所需软件 | 学期 | 备注 |
| ---- | ------ | -------- | -------- | ------ | -------- | -------- | -------- | ---- | ---- |

**同时支持通过固定格式的csv文件导入课程，要求csv格式如下并包含表头**

| 课程名 | 学时 | 课程总人数 | 班级人数 | 课程学期 | 课程教师 | 学院 |
| ------ | ---- | ---------- | -------- | -------- | -------- | ---- |

1.  软件模块

支持软件的添加、删除，同时支持添加软件对房间的依赖，表示该房间中安装了相应软件。软件信息格式如下

| 软件类型 | 软件名 | 配置要求 | 软件描述 | 软件备注 | 房间 |
| -------- | ------ | -------- | -------- | -------- | ---- |

1.  教师管理模块

查看教师信息汇总，教师删除。管理员可以修改教师权限。

| 账号id | 账号名 | 账号权限 | 教师id | 教师姓名 | 教师电话 |
| ------ | ------ | -------- | ------ | -------- | -------- |

同时支持通过csv文件导入教师信息，要求csv格式如下并包括表头

| 教师姓名 | 教师手机号 |
| -------- | ---------- |

**教师通过教师id注册，此时会自动生成账号id。第一个注册的账号默认为管理员账号，之后注册的账号默认为普通账号。后续可以通过账号权限进行能力控制。**

1.  登录模块

提供登录、注册以及账号支持。通过预先导入教师所得到的教师id来注册账号。**提供用户检验功能，若未登录直接访问网页，则网页会自动跳转至登录界面。提供密码传输加密功能，保护通讯中密码不泄露。**

总体来讲，系统之间功能划分成了不同模块，但是同时保证了联系性。核心的教室——软件——电脑三者之间的信息同步就进行了实现。创建房间时可以选择已有的电脑型号，对软件可以选择房间依赖，从而实现了信息的汇总。



# 收获和反思

1. 收获

   在本次试验中，最主要的是学会了以数据库为核心开发一个小型软件整体流程。需求分析-\>数据库建模-\>数据库实现-\>软件设计-\>软件实现-\>调试。采用数据库—后端应用-前端界面三层结构，学会了CS架构的简单实现。知道了在数据库领域中，由于辅助软件的存在，有时候代码的编写不是那么的重要，更重要的是数据库的设计是否合理，是否能够完整反映需求，是否支持后续的开发，对后续的开发是否友好。

   在技术层面，初窥建模软件，了解了通过PowerDesigner对数据库建模的基本方法，认识到了建模软件的强大之处。熟练了mysql语句的使用。学习了python的Web应用程序框架Flask，初步了解了人们口中常说的框架是怎么一回事。熟练了PyCharm的使用，愈发体会到PyCharm的强大之处，此次开发中设计到的Flask框架、数据库、cvs表格管理、虚拟环境，PyCharm均提供了傻瓜式管理，一款好的开发工具是开发人员手中的利剑。

2. 反思

   **初始设计时过于关注数据库建模，而忽视了功能需求。**导致在编写应用的时候需要反复调整数据库。**对于一些常用的功能，房间信息汇总、软件信息汇总等，可以一开始在数据库中写好视图，随后在软件中直接调用相关视图信息。**同时，在**数据库建模的时候只关注了实体联系**，力图构造一个完备的实体联系网，这样就导致实现应用的时候需要处理较多的关联以及外键约束，非常不方便实现。因此在后期适当的减少了实体关联。比如课程教师这一栏中，原有课程与教师之间是存在联系的，但是这样就很难在Web应用中添加课程与教师的联系，同时考虑如果进行数据导入，课程教师往往是一个独立文本，因此在后期将课程教师字段设置为了文本。这样更符合实际情况且方便了软件实现。

   因此，在开发中最大的问题就是功能需求与数据库实现不统一，数据库的实现也应该为功能需求服务，而不是功能需求为数据库服务。数据库的实现应该能够使得功能的实现更加方便，可拓展性更高。否则只能在开发应用程序的时候不断修改数据库以适应功能需求。

   该平台对于删除操作没有进行较好的实现，因为创建一个记录之后，其可能以外键的形式直接或简介的被其他表中的元素所引用，此时则无法删除。对于该问题，限于时间有限暂时没有想到较优解决方案，因此只能删除未被引用的元素。

   同时我发现left join语句是很有用的。初始阶段，我的所有视图都是使用条件语句进行筛选，然后发现这样会忽视某些字段为空的记录，后来我将所有的条件语句都修改为了left join才能所有显示想要的记录。

# 附录1

python相关依赖

| altgraph  atomicwrites  attrs  click  colorama  coverage  Flask  Flask-SQLAlchemy  Flask-WTF  future  greenlet  iniconfig  itsdangerous  Jinja2  MarkupSafe  numpy  packaging  pandas  pefile  pip  pluggy  py  pyinstaller  pyinstaller-hooks-contrib  PyMySQL  pyparsing  pytest  python-dateutil  pytz  pywin32-ctypes  setuptools  six  SQLAlchemy  toml  Werkzeug  wheel  WTForms | 0.17.2 1.4.0 21.2.0 8.0.3 0.4.4 6.0.2 2.0.2 2.5.1 0.15.1 0.18.2 1.1.2 1.1.1 2.0.1 3.0.2 2.0.1 1.21.3 21.0 1.3.4 2021.9.3 21.3 1.0.0 1.10.0 4.6 2021.3 1.0.2 2.4.7 6.2.5 2.8.2 2021.3 0.2.0 57.0.0 1.16.0 1.4.26 0.10.2 2.0.2 0.36.2 2.3.3 |
| ------------------------------------------------------------ | ------------------------------------------------------------ |
